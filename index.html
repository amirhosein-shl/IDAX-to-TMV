<!DOCTYPE html>
<html>
<head>
    <title>My Web Page</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js"></script>
</head>
<body>
    <div class="title-panel">
        <img src="Transpo Logo_Web_300.png" class="top-right" style="max-height:50px; max-width:286px;">
    </div>
<body>
    <h1>IDAX Counts into TMV</h1>
    <script>
    window.onload = function() {
        fetch('https://yourusername.pythonanywhere.com/get-csrf-token')
            .then(response => response.json())
            .then(data => {
                document.getElementById("csrf_token").value = data.csrf_token;
            })
            .catch(error => console.error('Error fetching CSRF token:', error));
    };
    </script>
    <form action="https://amirshl96.pythonanywhere.com/submit" method="POST">
        <input type="hidden" name="csrf_token" id="csrf_token">
        <label for="input3">Time of Day:</label>
        <input type="text" id="input3" name="input3"><br>

        <div class="container-fluid">
        <div class="row">
            <div class="col-md-8">
                <div id="drop_zone" style="border: 2px dashed #ccc; padding: 20px; text-align: center;">
                    Drag and drop a ZIP file containing PDFs and Excel files.
                    <input type="file" id="input1" accept=".zip" style="width: 100%;" multiple="false">
                </div>
                
                <script>
                    const dropZone = document.getElementById('drop_zone');
                    const fileInput = document.getElementById('file_upload');
                
                    dropZone.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        dropZone.style.border = '2px dashed #007BFF';
                    });
                
                    dropZone.addEventListener('dragleave', () => {
                        dropZone.style.border = '2px dashed #ccc';
                    });
                
                    dropZone.addEventListener('drop', (e) => {
                        e.preventDefault();
                        dropZone.style.border = '2px dashed #ccc';
                
                        const files = e.dataTransfer.files;
                        fileInput.files = files;
                
                        // You can now handle the uploaded ZIP file in JavaScript
                        // Extract the ZIP file and process its contents
                        processZipFile(fileInput.files[0]);
                    });
                </script>

                <div id="drop_zone" style="border: 2px dashed #ccc; padding: 20px; text-align: center;">
                    Drag and drop the TMV file.
                    <input type="file" id="input2" accept=".xlsx" style="width: 100%;" multiple="FALSE">
                </div>
                
                <button id="download_btn">Download Uploaded File</button>
                <div id="file_info"></div>
            </div>
        </div>
    </div>

        <input type="submit" value="Run">
    </form>
</body>
</html>

